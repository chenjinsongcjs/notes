# Shell语法

-   shell脚本就是将完成一个任务的所有命令按照执行的先后顺序，自上而下的写入一个文本文件中，然后给予执行权限

## 如何书写一个shell脚本

-   shell脚本的命名：
    -   见名知意，不要太长
    -   一般添加`.sh` 后缀
-   shell脚本的格式
    -   用 `#!` 这个符号指定shell的环境信息
    -   一般要给出shell脚本的描述信息
    ```bash
    #!/bin/bash
    #Author: xxxx
    #Created Time: 2018/08/2712:27
    #Script Description: first shell study script
    ```

## 如何运行一个脚本

-   给脚本文件执行权限，然后使用 `./xxx.sh`  执行脚本文件
-   如果不希望给脚本文件执行权限，可以使用命令：`bash  xxx.sh ` 或者  `sh  xxx.sh`  等等

## Shell中的特殊符号

```bash
    ~:                家目录    # cd ~ 代表进入用户家目录
    !:                执行历史命令   !! 执行上一条命令
    $:                变量中取内容符
    + - * \ %:       对应数学运算  加 减 乘 除 取余数  
    &:                后台执行
    *:                星号是shell中的通配符  匹配所有
    ?:                问号是shell中的通配符  匹配除回车以外的一个字符
    ;:               分号可以在shell中一行执行多个命令，命令之间用分号分割
    |:               管道符 上一个命令的输出作为下一个命令的输入   cat filename | grep "abc"
    \:                转义字符
    ``:               反引号 命令中执行命令    echo "today is `date +%F`"
    ' ':              单引号，脚本中字符串要用单引号引起来，但是不同于双引号的是，单引号不解释变量
    " ":              双引号，脚本中出现的字符串可以用双引号引起来
```

## shell中的管道运用

-   `  |  ` 管道符在shell中使用是最多的，很多组合命令都需要通过组合命令来完成输出。管道符其实就是下一个命令对上一个命令的输出做处理。

## shell重定向

```bash
     >   重定向输入  覆盖原数据
     >>  重定向追加输入，在原数据的末尾添加
     <   重定向输出     wc -l < /etc/passwd
     <<  重定向追加输出  fdisk /dev/sdb << EOF  中间一些列的操作选项  EOF
     &>  标准输出和错误输出重定向
     2>&1 标准输出和标准错误合并输出到某个文件

```

## shell的数学运算

expr 5 \\\* 2  #注意\*出现应该转义，否则认为是通配符

```bash
# expr 命令：只能做整数运算，格式比较古板，注意空格
expr 1 + 1
2
expr 5 - 2
3
expr 5 \* 2  #注意*出现应该转义，否则认为是通配符
10
expr 5 / 2
2
expr 5 % 2
1

#使用bc计算器处理浮点运算,scale=2代表小数点保留两位
echo "scale=2;3+100"|bc
103
echo "scale=2;100-3"|bc
97
echo "scale=2;100/3"|bc
33.33
echo "scale=2;100*3"|bc
300
# 双小圆括号运算，在shell中(( ))也可以用来做数学运算
echo $(( 100+3))
103
echo $(( 100-3)) 
97
echo $(( 100%3))
1
echo $(( 100*3))
300
echo $(( 100/3))
33
echo $(( 100**3))     #开方运算
1000000

```

## 退出脚本

```bash
exit NUM # 退出脚本，释放系统资源，NUM代表一个整数，代表返回值。
```
